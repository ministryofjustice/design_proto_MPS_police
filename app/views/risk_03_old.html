{% extends "layout.html" %}

{% block page_title %}
Question page
{% endblock %}

{% block content %}

<style media="screen">
.panel{
  margin-bottom: 30px;
}
.removelink{
  float:right;
  /*background-color: red;*/
}
.form-control-3-4{
  width: 80%;
}
/*multiples styles*/
.heading-medium{
  padding-top: 20px;
}
.list-item-wrapper-vertical {
  padding-left: 20px;
  padding-right: 20px;
}

.list-item-wrapper-vertical input {
  width: 80%;
}

.list-item-wrapper-vertical .remove-list-item-vertical {
  margin-top: 4.4em;
  display: block;
}

.list-item-wrapper-vertical .heading-medium {
  margin-top: 0;
}

.button-add-another-vertical {
  background-color: #eee;
  color: #000;
  box-shadow: 0 2px 0 #666;
}

.button-add-another-vertical:hover {
  background-color: #ccc;
  color: #000;
  box-shadow: 0 2px 0 #666;
}

.button-add-another-vertical:focus {
  background-color: #ccc;
  color: #000;
  box-shadow: 0 2px 0 #666;
}

@media (max-width: 640px) {
  .list-item-wrapper-vertical inpit {
    width: 100%;
  }

  .button-add-another-vertical {
    width: 90%;
    margin: auto;
    display: block;
  }
}
</style>

<main id="content" role="main">

  {% include "includes/breadcrumb_examples.html" %}

  <div class="grid-row">
    <div class="column-full"><p><a href="risk_02.html">Back</a>&emsp;3 of 13&emsp;<a href="risk_04.html">Skip</a></p>
    </div>
    <div class="column-two-thirds">

      <form action="risk_04" method="post" class="form">


        <h1 class="heading-secondary">Security</h1>

        <!-- question -->
        <h2 class="heading-medium">
          Do they need to be escorted by more than one person?
        </h2>
        <div class="form-group">
          <fieldset class="inline">

            <legend class="visually-hidden"></legend>

            <div class="multiple-choice" data-target="controlledunlock-info">
              <input id="radio-inline-21" type="radio" name="controlledunlock" value="Yes" {{ checked("controlledunlock", "Yes") }}>
              <label for="radio-inline-21">Yes</label>
            </div>

            <div class="multiple-choice">
              <input id="radio-inline-22" type="radio" name="controlledunlock" value="No" {{ checked("controlledunlock", "No") }} onclick="clearDetails('textarea-a');">
              <label for="radio-inline-22">No</label>
            </div>

          </fieldset>
        </div>


        <div class="panel panel-border-narrow js-hidden" id="controlledunlock-info">
          <div class="form-group">
            <label class="form-label" for="textarea-a">
              Give details of number of people and any equipment required:
            </label>
            <textarea class="form-control form-control-3-4" id="textarea-a" cols="30" rows="3" name="controlledunlock_info">{{data['controlledunlock_info']}}</textarea>
          </div>
        </div>

        <!-- question -->


        <!-- question -->
        <h2 class="heading-medium">
          Are they of high public interest?
        </h2>
        <div class="form-group">
          <fieldset class="inline">

            <legend class="visually-hidden"></legend>

            <div class="multiple-choice" data-target="high-public-interest-info">
              <input id="radio-inline-7" type="radio" name="publicInterest" value="Yes" {{ checked("publicInterest", "Yes") }}>
              <label for="radio-inline-7">Yes</label>
            </div>

            <div class="multiple-choice">
              <input id="radio-inline-8" type="radio" name="publicInterest" value="No" {{ checked("publicInterest", "No") }} onclick="clearDetails('textarea-b');">
              <label for="radio-inline-8">No</label>
            </div>

          </fieldset>
        </div>

        <div class="panel panel-border-narrow js-hidden" id="high-public-interest-info">
          <div class="form-group">
            <label class="form-label" for="textarea-b">
              Give details
            </label>
            <textarea class="form-control form-control-3-4" id="textarea-b" cols="30" rows="3" name="publicInterest_info"
            >{{ data["publicInterest_info"] }}</textarea>
          </div>
        </div>

        <!-- question -->
        <h2 class="heading-medium">
          Do they have PNC warnings?
        </h2>
        <div class="form-group">
          <fieldset class="inline">

            <legend class="visually-hidden"></legend>

            <div class="multiple-choice" data-target="pnc-info">
              <input id="radio-inline-17" type="radio" name="pnc" value="Yes" {{ checked("pnc", "Yes") }}>
              <label for="radio-inline-17">Yes</label>
            </div>

            <div class="multiple-choice">
              <input id="radio-inline-18" type="radio" name="pnc" value="No" {{ checked("pnc", "No") }} onclick="clearDetails('textarea-c');">
              <label for="radio-inline-18">No</label>
            </div>

          </fieldset>
        </div>

        <div class="panel panel-border-narrow js-hidden" id="pnc-info">
          <div class="list-item-wrapper-vertical">
            <div class="grid-row">
              <div class="column-two-thirds">
                <div class="form-group-compound">
                  <h2 class="heading-medium">Warning 1</h2>

                  <div class="form-group">
                    <label class="form-label" for="field-1">
                      Warning
                    </label>

                    <input type="text" class="form-control" id="field-1" name="field-1" value="{{data['field-1']}}">
                  </div>

                  <div class="form-group">
                    <label class="form-label" for="field-2">
                      Date
                    </label>

                    <input type="text" class="form-control" id="field-2" name="field-2" value="{{data['field-2']}}">
                  </div>

                  <div class="form-group">
                    <label class="form-label" for="field-3">
                      Description
                    </label>

                    <textarea class="form-control form-control-3-4" name="field-3" id="field-3" rows="3">{{data['field-3']}}</textarea>
                  </div>

                  <!-- <div class="form-group">
                  <label class="form-label" for="textarea">
                  Why can't you provide a National Insurance number?
                </label>
                <textarea class="form-control form-control-3-4" name="textarea" id="textarea" rows="5"></textarea>
              </div> -->

            </div>
          </div>

          <div class="column-one-third">
          </div>
        </div>

        <hr />

        <div class="grid-row">
          <div class="column-two-thirds">
            <div class="form-group">
              <button id="add-button" class="button button-add-another-vertical">Add another warning</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- button -->
    <div class="form-group">
      {% include "includes/risk-screen-buttons.html" %}
    </div>
  </form>

</div>
<div class="side-profile column-one-third">
  {% include "includes/side-profile.html" %}
</div>
</div>
</main>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script type="text/javascript">
$(document).on('click', '.button-add-another-vertical', function (e) {
  e.preventDefault();
  var beforeThis = $(this).parents('.list-item-wrapper-vertical').find('.grid-row').last();
  $(beforeThis).before(
    '<div class="grid-row">' +
    '<div class="column-two-thirds">' +
    '<div class="form-group-compound">' +
    '<h2 class="heading-medium">Item 1</h2>' +
    '<div class="form-group">' +
    '<label class="form-label" for="field-1">' +
    'Warning type' +
    '</label>' +
    '<input type="text" class="form-control" id="field-1" name="field-1">' +
    '</div>' +
    '<div class="form-group">' +
    '<label class="form-label" for="field-2">' +
    'Date' +
    '</label>' +
    '<input type="text" class="form-control" id="field-2" name="field-2">' +
    '</div>' +
    '<div class="form-group">' +
    '<label class="form-label" for="field-3">' +
    'Description' +
    '</label>' +
    // '<input type="text" class="form-control" id="field-3" name="field-3">'
    '<textarea class="form-control form-control-3-4" id="field-3" name="field-3"></textarea>'
    +
    '</div>' +
    '</div>' +
    '</div>' +
    '<div class="column-one-third">' +
    '</div>' +
    '</div>' +
    '<hr />'

  );
  sortFieldsVertical();
});

function sortFieldsVertical() {
  var listCounter = 1;
  var inputCounter = 1;

  $(document).find('.list-item-wrapper-vertical .grid-row').each(function () {
    $(this).find('h2').text('Warning ' + listCounter);

    if ($(this).find('.remove-list-item-vertical').length === 0) {
      $(this).find('.column-one-third:last').append('<a id="remove-item-vertical-' + listCounter + '" class="remove-list-item-vertical" href="#">Remove this</a>');
    } else {
      $(this).find('.remove-list-item-vertical').attr('id', 'remove-item-vertical-' + listCounter);
    }

    $(this).find('label').each(function () {
      $(this).attr('for', 'field-' + inputCounter);
      inputCounter++;
    });

    $(this).find('input').each(function () {
      var labelNo = $(this).parent().find('label').attr('for').split('-').pop();
      $(this).attr('id', 'field-' + labelNo);
      $(this).attr('name', 'field-' + labelNo);
    });

    listCounter++;
  });

  if ($(document).find('.list-item-wrapper-vertical .grid-row').length === 2) {
    $('.remove-list-item-vertical').remove();
  }
}

$(document).on('click', '.remove-list-item-vertical', function (e) {
  e.preventDefault();
  $(this).parents('.grid-row').prev('hr').remove();
  $(this).parents('.grid-row').remove();
  sortFieldsVertical();
});
</script>


{% endblock %}
